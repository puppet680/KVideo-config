# 🔄 API Proxy & LunaTV 配置中转服务

这是一个基于 Cloudflare Workers 的通用 API 中转工具，专门用于解决 MoonTV / LunaTV 等客户端在访问 GitHub 原始配置或受限接口时的跨域、被墙及格式转换问题。

---

## 📦 配置源对比

| 配置源名称 | 标识符 (source) | 订阅 | 包含成人内容 | 适用场景 |
| :--- | :--- | :--- | :---: | :--- |
| **Lite** | `lite` | `lite.json` | ❌ 否 | 精简版🎬源链接  |
| **Adult** | `adult` | `adult.json` | ✅ 是 | 精简版🎬+🔞源链接 |
| **Full** | `full` | `KVideo-config.json` | ✅ 是 | 完整版🎬+🔞源链接 |

---

<details>
<summary>🚀 快速开始：订阅链接模板</summary>

### 💡 使用说明
将 `<你的域名>` 替换为你的实际 Cloudflare Worker 地址。

#### 1. 精简版 (Lite)
- **原始 JSON**: `https://<你的域名>/?format=0&source=jin18`
- **中转代理 JSON**: `https://<你的域名>/?format=1&source=jin18`

#### 2. 精简成人版 (Adult)
- **原始 JSON**: `https://<你的域名>/?format=0&source=jingjian`
- **中转代理 JSON**: `https://<你的域名>/?format=1&source=jingjian`

#### 3. 完整版 (Full / 默认)
- **原始 JSON**: `https://<你的域名>/?format=0&source=full`
- **中转代理 JSON**: `https://<你的域名>/?format=1&source=full`

</details>

<details>
<summary>🛠️ 高级配置与逻辑说明</summary>

### 🧩 前缀替换逻辑
- **自动去重**：如果 JSON 中的 `api` 字段已包含旧的代理前缀（如 `?url=`），系统会自动剔除旧前缀，重新包装为当前 Worker 的代理地址。
- **自定义前缀**：支持使用 `&prefix=https://your-proxy.com/` 参数来自定义代理路径。

### ⚙️ Worker 修改建议
- **修改超时**：在 `worker.js` 中修改 `9000` (ms) 即可调整代理请求的超时时间。
- **缓存策略**：默认 KV 缓存为 600 秒（10分钟），可根据需求调整 `expirationTtl`。

</details>

---

## 🆕 最近更新

- 🔍 **智能健康检测**：GitHub Actions 每 1 小时自动检测 API 可用性。
- 🚨 **墙态识别**：新增连续失败检测，连续 3 次失败将触发 `🚨` 严重警告。
- 🧹 **自动化构建**：自动从主配置生成 `lite.json` (过滤 adult 组) 和 `adult.json`。
- ⚡ **移除冗余**：已移除 Base58 编码功能，全面回归标准 JSON 交互，提升响应速度。

---

## 📊 API 健康报告 (每日自动检测API状态)

> [!TIP]
> 接口检测每 1 小时自动运行一次。为了保持主文档整洁，详细的健康报告已移至独立文件。

### 📋 [点击此处查看最新 API 健康报告列表](./report.md)

| 状态说明 | 含义 |
| :--- | :--- |
| ✅ | 接口当前可用 |
| ❌ | 接口暂时无法连接 |
| 🚨 | 连续 3 天以上检测失败 (可能已被墙或宕机) |
| 🚫 | 接口已手动禁用 |

---


## ⚖️ 免责声明

> [!IMPORTANT]
> **在使用本仓库前，请务必仔细阅读本声明。**

1. **项目性质**：本仓库仅供 **技术研究与学习交流** 使用。内容整理自互联网公开信息，不确保证确性或合法性。
2. **内容限制**：本仓库 **不存储、不托管、不分发** 任何音视频文件或媒体流。
3. **责任承担**：使用本仓库内容所产生的一切风险（包括但不限于法律风险、数据丢失）均由使用者自行承担，维护者概不负责。
4. **版权保护**：若认为本仓库内容侵犯您的权益，请提交 Issue 并提供证明材料，我们将及时处理。
5. **地域限制**：不建议在法律法规严苛的司法管辖区（如中国大陆）使用涉及侵权内容的配置。

---


